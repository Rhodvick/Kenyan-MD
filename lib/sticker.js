const _0x58498f=_0x58b6;(function(_0x91f2b4,_0x96234c){const _0x3a5222=_0x58b6,_0x16f8ce=_0x91f2b4();while(!![]){try{const _0x1ed744=parseInt(_0x3a5222(0x110))/0x1+-parseInt(_0x3a5222(0x114))/0x2*(parseInt(_0x3a5222(0x102))/0x3)+-parseInt(_0x3a5222(0xe9))/0x4+parseInt(_0x3a5222(0x127))/0x5+parseInt(_0x3a5222(0xf1))/0x6*(parseInt(_0x3a5222(0x10e))/0x7)+-parseInt(_0x3a5222(0xf0))/0x8+parseInt(_0x3a5222(0x119))/0x9;if(_0x1ed744===_0x96234c)break;else _0x16f8ce['push'](_0x16f8ce['shift']());}catch(_0x3d0a4d){_0x16f8ce['push'](_0x16f8ce['shift']());}}}(_0x3c4a,0xd74c3),function(_0x3666a7,_0x6e6f35){const _0x391472=_0x58b6,_0x40232f=_0x1314,_0x37bc47=_0x3666a7();while(!![]){try{const _0x382479=-parseInt(_0x40232f(0x1fa))/0x1*(-parseInt(_0x40232f(0x214))/0x2)+-parseInt(_0x40232f(0x23f))/0x3*(-parseInt(_0x40232f(0x21a))/0x4)+-parseInt(_0x40232f(0x22a))/0x5+-parseInt(_0x40232f(0x229))/0x6+parseInt(_0x40232f(0x219))/0x7*(-parseInt(_0x40232f(0x246))/0x8)+parseInt(_0x40232f(0x21b))/0x9*(parseInt(_0x40232f(0x243))/0xa)+parseInt(_0x40232f(0x21d))/0xb;if(_0x382479===_0x6e6f35)break;else _0x37bc47['push'](_0x37bc47[_0x391472(0xec)]());}catch(_0x3cf4f6){_0x37bc47[_0x391472(0x123)](_0x37bc47[_0x391472(0xec)]());}}}(_0x10b9,0x2ecb0));const _0x5680ed=_0x347b;(function(_0x2f2ce7,_0x448935){const _0x427dc4=_0x1314,_0x2297bb=_0x347b,_0x37f722=_0x2f2ce7();while(!![]){try{const _0x44298d=-parseInt(_0x2297bb(0x138))/0x1*(-parseInt(_0x2297bb(0x146))/0x2)+-parseInt(_0x2297bb(0x115))/0x3+-parseInt(_0x2297bb(0x128))/0x4*(-parseInt(_0x2297bb(0x124))/0x5)+parseInt(_0x2297bb(0x145))/0x6*(parseInt(_0x2297bb(0x13d))/0x7)+parseInt(_0x2297bb(0x118))/0x8*(parseInt(_0x2297bb(0x13b))/0x9)+-parseInt(_0x2297bb(0x13e))/0xa+-parseInt(_0x2297bb(0x14c))/0xb;if(_0x44298d===_0x448935)break;else _0x37f722[_0x427dc4(0x22b)](_0x37f722[_0x427dc4(0x224)]());}catch(_0x34b99d){_0x37f722[_0x427dc4(0x22b)](_0x37f722[_0x427dc4(0x224)]());}}}(_0x40d7,0x5ae42));function _0x3c4a(){const _0x497ca3=['-vf','133034RNSkAA','png','252624LmQilF','exit','text/plain','shift','560664iBDClU','png:-','2087586XFsOvT','12811624qeCzNM','887070vsiwGo','save','Image','entries','2408uUhkOD','support','-vcodec','WEBP','end','text','addOutputOptions','webp','stdin','.webp','toFormat','801609LnVCWZ','\x27)))\x0ac.width\x20=\x20c.height\x20=\x20512\x0alet\x20max\x20=\x20Math.max(im.width,\x20im.height)\x0alet\x20w\x20=\x20512\x20*\x20im.width\x20/\x20max\x0alet\x20h\x20=\x20512\x20*\x20im.height\x20/\x20max\x0actx.drawImage(im,\x20256\x20-\x20w\x20/\x202,\x20256\x20-\x20h\x20/\x202,\x20w,\x20h)\x0a','3TtLETm','10ZUZsMl','1IhawiE','exif','from','writeUIntLE','url','./tmp/','ext','2747074cyFTqw','status','inputFormat','14vNRCit','magick','337264hawFgu','5862jHVmvm','webp:-','filter','927026vCBQYc','jpeg','let\x20im\x20=\x20await\x20loadImg(\x27data:','2780YpoGLD','concat','18562446YdkhmP','promises','332WjfZqr','input','test','length','40FVhwIx','toString',';base64,\x27+(await\x20window.loadToDataURI(\x27','error','push','11790QCGZau','3677VtqElQ','https://api.xteam.xyz/sticker/wm?','1572665edbRYc','image/jpeg','6446310UuvCZS','randomBytes','utf8','includes','4xatLMV','exports','./tmp','ffmpegWebp','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','convert','application/octet-stream','close','hex','default','ffmpeg','load','join','1125450tFsyZy','stringify','.jpeg','libwebp','wa-sticker-formatter'];_0x3c4a=function(){return _0x497ca3;};return _0x3c4a();}import{dirname}from'path';function _0x1314(_0x46ed03,_0x4be754){const _0x553d8f=_0x10b9();return _0x1314=function(_0x1bd6f4,_0x254f4e){_0x1bd6f4=_0x1bd6f4-0x1f3;let _0xb2227a=_0x553d8f[_0x1bd6f4];return _0xb2227a;},_0x1314(_0x46ed03,_0x4be754);}import{fileURLToPath}from'url';function _0x10b9(){const _0x3f26dc=_0x58b6,_0x2fe913=[_0x3f26dc(0xff),_0x3f26dc(0x107),_0x3f26dc(0xf7),'unlink',_0x3f26dc(0x130),'bin','2120613Qbzcbu',_0x3f26dc(0x133),'scale=512:512:flags=lanczos:force_original_aspect_ratio=decrease,format=rgba,pad=512:512:(ow-iw)/2:(oh-ih)/2:color=#00000000,setsar=1','toBuffer',_0x3f26dc(0xf9),_0x3f26dc(0xed),_0x3f26dc(0x135),_0x3f26dc(0xe8),_0x3f26dc(0x100),_0x3f26dc(0xf3),_0x3f26dc(0x118),_0x3f26dc(0x137),_0x3f26dc(0x117),_0x3f26dc(0x12a),_0x3f26dc(0x11d),'1474264UqGXAm',_0x3f26dc(0xfe),_0x3f26dc(0xfc),_0x3f26dc(0x13b),_0x3f26dc(0x115),_0x3f26dc(0xfb),_0x3f26dc(0xfd),_0x3f26dc(0x10b),_0x3f26dc(0x10f),_0x3f26dc(0xf6),_0x3f26dc(0x104),_0x3f26dc(0x12b),'writeFile',_0x3f26dc(0x11a),'mime',_0x3f26dc(0x105),_0x3f26dc(0x129),_0x3f26dc(0x12f),_0x3f26dc(0x116),_0x3f26dc(0x13e),_0x3f26dc(0x128),'POST',_0x3f26dc(0x131),_0x3f26dc(0x11e),'text','1431152hYfMfm','readFile',_0x3f26dc(0x111),_0x3f26dc(0x10d),'stdout',_0x3f26dc(0x132),_0x3f26dc(0x138),_0x3f26dc(0x101),_0x3f26dc(0x112),_0x3f26dc(0x134),_0x3f26dc(0xee),'610982TZklud',_0x3f26dc(0xe6),_0x3f26dc(0xf4),_0x3f26dc(0xf8),'reply','7XFiYbv',_0x3f26dc(0x12d),_0x3f26dc(0x124),'buffer',_0x3f26dc(0xe7),_0x3f26dc(0x126),_0x3f26dc(0x121),_0x3f26dc(0x139),_0x3f26dc(0x12e),_0x3f26dc(0x11f),_0x3f26dc(0x120),_0x3f26dc(0xec),_0x3f26dc(0x11b),'https://nurutomo.herokuapp.com/api/canvas?',_0x3f26dc(0x10c),'format',_0x3f26dc(0xef),_0x3f26dc(0x13a),'push',_0x3f26dc(0x125),_0x3f26dc(0x11c),_0x3f26dc(0x122),_0x3f26dc(0xf5),_0x3f26dc(0x106)];return _0x10b9=function(){return _0x2fe913;},_0x10b9();}import*as _0x341fc0 from'fs';import*as _0x2e8692 from'path';import*as _0x314a65 from'crypto';import{ffmpeg}from'./converter.js';import _0x401968 from'fluent-ffmpeg';import{spawn}from'child_process';import _0x4ca652 from'./uploadFile.js';import _0x4151d4 from'./uploadImage.js';import{fileTypeFromBuffer}from'file-type';function _0x347b(_0xdfb167,_0x2d1fc5){const _0x4d640e=_0x40d7();return _0x347b=function(_0x5aadaf,_0x56832a){_0x5aadaf=_0x5aadaf-0x107;let _0x5bd2e6=_0x4d640e[_0x5aadaf];return _0x5bd2e6;},_0x347b(_0xdfb167,_0x2d1fc5);}import _0x560260 from'node-webpmux';import _0x23f8cf from'node-fetch';const __dirname=dirname(fileURLToPath(import.meta[_0x58498f(0x108)])),tmp=_0x2e8692[_0x58498f(0x139)](__dirname,_0x5680ed(0x11e));function sticker2(_0x20f2ba,_0x32797b){return new Promise(async(_0x3fe095,_0xfc2e6)=>{const _0x5e468a=_0x1314,_0x503077=_0x347b;try{if(_0x32797b){let _0xe765c9=await _0x23f8cf(_0x32797b);if(_0xe765c9[_0x5e468a(0x227)]!==0xc8)throw await _0xe765c9[_0x503077(0x111)]();_0x20f2ba=await _0xe765c9[_0x503077(0x135)]();}let _0x354b31=_0x2e8692[_0x503077(0x125)](tmp,+new Date()+_0x503077(0x108));await _0x341fc0[_0x5e468a(0x1fd)][_0x503077(0x10d)](_0x354b31,_0x20f2ba);let _0x5621ab=spawn(_0x5e468a(0x242),['-y','-i',_0x354b31,_0x5e468a(0x215),_0x503077(0x140),'-f',_0x503077(0x11c),'-']);_0x5621ab['on'](_0x5e468a(0x22e),_0xfc2e6),_0x5621ab['on'](_0x503077(0x110),async()=>{const _0x1f152c=_0x503077;await _0x341fc0[_0x1f152c(0x117)][_0x1f152c(0x12d)](_0x354b31);});let _0x3503f9=[];const [_0x41ed78,..._0x50aa7e]=[...module[_0x503077(0x130)][_0x503077(0x132)]['gm']?['gm']:module[_0x503077(0x130)][_0x503077(0x10c)]?[_0x503077(0x10c)]:[],_0x5e468a(0x20e),_0x5e468a(0x213),_0x503077(0x121)];let _0x3bc08c=spawn(_0x41ed78,_0x50aa7e);_0x3bc08c['on'](_0x503077(0x12a),_0x5f2c9e=>conn[_0x503077(0x131)](m[_0x503077(0x127)],util[_0x503077(0x14a)](_0x5f2c9e),m)),_0x3bc08c[_0x503077(0x12c)]['on'](_0x503077(0x141),_0x26b039=>_0x3503f9[_0x503077(0x134)](_0x26b039)),_0x5621ab[_0x503077(0x12c)]['pipe'](_0x3bc08c[_0x503077(0x123)]),_0x3bc08c['on'](_0x503077(0x136),()=>{const _0x36f09b=_0x58b6;_0x3fe095(Buffer[_0x36f09b(0x118)](_0x3503f9));});}catch(_0x3dead4){_0xfc2e6(_0x3dead4);}});}async function canvas(_0x488fa9,_0x1a0434=_0x5680ed(0x11c),_0xff3ea1=0.92){const _0x182500=_0x58498f,_0x355292=_0x1314,_0x52279f=_0x5680ed;let _0x2909c0=await _0x23f8cf(_0x355292(0x226)+queryURL({'type':_0x1a0434,'quality':_0xff3ea1}),{'method':_0x52279f(0x12f),'headers':{'Content-Type':_0x182500(0xeb),'Content-Length':_0x488fa9[_0x52279f(0x147)]},'body':_0x488fa9}),_0x4ab61b=await _0x2909c0[_0x355292(0x21c)]();return _0x4ab61b;}function queryURL(_0x2ceaff){const _0x27e4f2=_0x5680ed;return new URLSearchParams(Object[_0x27e4f2(0x14d)](_0x2ceaff));}async function sticker1(_0x101b1d,_0x5589d2){const _0x4c0346=_0x5680ed;_0x5589d2=_0x5589d2?_0x5589d2:await _0x4151d4(_0x101b1d);let {mime:_0x53babe}=_0x5589d2?{'mime':_0x4c0346(0x148)}:await fileTypeFromBuffer(_0x101b1d),_0x1d1927=_0x4c0346(0x129)+_0x53babe+_0x4c0346(0x133)+_0x5589d2+_0x4c0346(0x11b);return await canvas(_0x1d1927,_0x4c0346(0x126));}function _0x40d7(){const _0x7937dc=_0x58498f,_0x38ebb9=_0x1314,_0x2a5a74=[_0x38ebb9(0x1ff),_0x38ebb9(0x1f7),'entries','html',_0x7937dc(0x12c),_0x38ebb9(0x240),_0x7937dc(0x109),_0x7937dc(0x13d),_0x7937dc(0x13c),_0x38ebb9(0x206),_0x38ebb9(0x1f4),_0x38ebb9(0x22d),_0x38ebb9(0x1f8),_0x38ebb9(0x1fc),_0x38ebb9(0x223),_0x38ebb9(0x235),_0x38ebb9(0x212),_0x7937dc(0xfa),_0x38ebb9(0x232),_0x7937dc(0x137),_0x38ebb9(0x230),_0x38ebb9(0x237),_0x38ebb9(0x217),_0x38ebb9(0x1fd),_0x38ebb9(0x222),_0x38ebb9(0x23d),_0x38ebb9(0x215),_0x38ebb9(0x210),_0x38ebb9(0x23e),_0x7937dc(0xf2),_0x38ebb9(0x201),_0x38ebb9(0x231),_0x38ebb9(0x23b),_0x38ebb9(0x211),_0x38ebb9(0x20f),_0x38ebb9(0x1f6),_0x7937dc(0x103),_0x38ebb9(0x220),_0x38ebb9(0x248),'chat',_0x38ebb9(0x209),_0x38ebb9(0x202),_0x38ebb9(0x22e),_0x38ebb9(0x1fe),_0x38ebb9(0x20d),_0x38ebb9(0x234),_0x38ebb9(0x1f5),_0x38ebb9(0x205),_0x38ebb9(0x221),_0x38ebb9(0x218),_0x38ebb9(0x1f9),_0x38ebb9(0x21f),_0x7937dc(0x123),_0x38ebb9(0x21c),_0x7937dc(0xea),_0x38ebb9(0x20a),_0x38ebb9(0x22c),_0x38ebb9(0x1fb),_0x38ebb9(0x236),_0x38ebb9(0x23c),_0x38ebb9(0x245),_0x38ebb9(0x22f),_0x38ebb9(0x200),_0x7937dc(0x10a),_0x38ebb9(0x239),'data',_0x38ebb9(0x227),_0x38ebb9(0x233),_0x7937dc(0x113),_0x38ebb9(0x20b),_0x38ebb9(0x225),_0x38ebb9(0x207),_0x38ebb9(0x204),_0x38ebb9(0x247),_0x38ebb9(0x228)];return _0x40d7=function(){return _0x2a5a74;},_0x40d7();}async function sticker3(_0x4d64c9,_0xe68488,_0x39f994,_0x223dd7){const _0x2647fb=_0x1314,_0x53595c=_0x5680ed;_0xe68488=_0xe68488?_0xe68488:await _0x4ca652(_0x4d64c9);let _0x18020a=await _0x23f8cf(_0x2647fb(0x21e)+new URLSearchParams(Object[_0x2647fb(0x216)]({'url':_0xe68488,'packname':_0x39f994,'author':_0x223dd7})));return await _0x18020a[_0x53595c(0x135)]();}async function sticker4(_0x4d7085,_0x82be16){const _0x47a679=_0x1314,_0x16ade3=_0x5680ed;if(_0x82be16){let _0x104ffd=await _0x23f8cf(_0x82be16);if(_0x104ffd[_0x16ade3(0x142)]!==0xc8)throw await _0x104ffd[_0x47a679(0x208)]();_0x4d7085=await _0x104ffd[_0x16ade3(0x135)]();}return await ffmpeg(_0x4d7085,[_0x16ade3(0x11a),_0x16ade3(0x140)],_0x16ade3(0x10a),_0x16ade3(0x126));}async function sticker5(_0x506f54,_0x1f878a,_0x23156b,_0x5629fa,_0x58c2a5=[''],_0x33186a={}){const _0x188d57=_0x58498f,_0x21298c=_0x1314,{Sticker:_0x488dca}=await import(_0x21298c(0x203)),_0x28ceb6={'type':_0x188d57(0x136),'pack':_0x23156b,'author':_0x5629fa,'categories':_0x58c2a5,..._0x33186a};return new _0x488dca(_0x506f54?_0x506f54:_0x1f878a,_0x28ceb6)[_0x21298c(0x23a)]();}function sticker6(_0x9e852a,_0x2fe6ed){return new Promise(async(_0x1ff4d5,_0xd17b2a)=>{const _0x58833b=_0x1314,_0x36630b=_0x347b;if(_0x2fe6ed){let _0xb0d7e4=await _0x23f8cf(_0x2fe6ed);if(_0xb0d7e4[_0x36630b(0x142)]!==0xc8)throw await _0xb0d7e4[_0x36630b(0x111)]();_0x9e852a=await _0xb0d7e4[_0x36630b(0x135)]();}const _0x156eb1=await fileTypeFromBuffer(_0x9e852a)||{'mime':_0x58833b(0x238),'ext':_0x36630b(0x13a)};if(_0x156eb1[_0x36630b(0x13f)]==_0x36630b(0x13a))_0xd17b2a(_0x9e852a);const _0x49425e=_0x2e8692[_0x36630b(0x125)](__dirname,_0x36630b(0x151)+ +new Date()+'.'+_0x156eb1[_0x36630b(0x13f)]),_0x1ea80d=_0x2e8692[_0x36630b(0x125)](_0x49425e+_0x36630b(0x149));await _0x341fc0[_0x36630b(0x117)][_0x36630b(0x10d)](_0x49425e,_0x9e852a);let _0x1c5997=/video/i[_0x36630b(0x13c)](_0x156eb1[_0x36630b(0x12b)])?_0x401968(_0x49425e)[_0x58833b(0x20c)](_0x156eb1[_0x36630b(0x13f)]):_0x401968(_0x49425e)[_0x36630b(0x10b)](_0x49425e);_0x1c5997['on']('error',function(_0x1aadfd){const _0x5422a8=_0x36630b;console[_0x5422a8(0x12a)](_0x1aadfd),_0x341fc0[_0x5422a8(0x117)][_0x5422a8(0x12d)](_0x49425e),_0xd17b2a(_0x9e852a);})['on'](_0x36630b(0x120),async function(){const _0x19496a=_0x58833b,_0x3fe127=_0x36630b;_0x341fc0[_0x19496a(0x1fd)][_0x3fe127(0x12d)](_0x49425e),_0x1ff4d5(await _0x341fc0[_0x3fe127(0x117)][_0x3fe127(0x137)](_0x1ea80d));})[_0x36630b(0x12e)]([_0x36630b(0x143),_0x36630b(0x107),_0x36630b(0x11a),_0x36630b(0x109)])[_0x36630b(0x11f)](_0x36630b(0x126))[_0x36630b(0x11d)](_0x1ea80d);});}function _0x58b6(_0x29d429,_0x56274b){const _0x3c4a77=_0x3c4a();return _0x58b6=function(_0x58b62c,_0x4ed8e2){_0x58b62c=_0x58b62c-0xe6;let _0x313fb5=_0x3c4a77[_0x58b62c];return _0x313fb5;},_0x58b6(_0x29d429,_0x56274b);}async function addExif(_0x3e0add,_0x55f1e0,_0x27b723,_0xb16c7f=[''],_0x48f743={}){const _0x3bba72=_0x1314,_0x2b9654=_0x5680ed,_0x57f718=new _0x560260[(_0x2b9654(0x150))](),_0x46fbc7=_0x314a65[_0x3bba72(0x244)](0x20)[_0x2b9654(0x10e)](_0x2b9654(0x119)),_0xfadd48={'sticker-pack-id':_0x46fbc7,'sticker-pack-name':_0x55f1e0,'sticker-pack-publisher':_0x27b723,'emojis':_0xb16c7f,..._0x48f743};let _0x1af98d=Buffer[_0x2b9654(0x114)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x5100fe=Buffer[_0x2b9654(0x114)](JSON[_0x3bba72(0x1f3)](_0xfadd48),_0x2b9654(0x139)),_0x49a7c1=Buffer[_0x3bba72(0x241)]([_0x1af98d,_0x5100fe]);return _0x49a7c1[_0x2b9654(0x112)](_0x5100fe[_0x2b9654(0x147)],0xe,0x4),await _0x57f718[_0x2b9654(0x122)](_0x3e0add),_0x57f718[_0x2b9654(0x14b)]=_0x49a7c1,await _0x57f718[_0x2b9654(0x11d)](null);}async function sticker(_0x198a1d,_0x1deffc,..._0x616fc8){const _0x166908=_0x58498f,_0x22454b=_0x1314,_0x30b315=_0x5680ed;let _0xdcc11,_0x388aaa;for(let _0x4d4eff of[sticker3,global[_0x22454b(0x1f9)][_0x166908(0x137)]&&sticker6,sticker5,global[_0x30b315(0x132)][_0x30b315(0x113)]&&global[_0x22454b(0x1f9)][_0x30b315(0x10f)]&&sticker4,global[_0x22454b(0x1f9)][_0x30b315(0x113)]&&(global[_0x30b315(0x132)][_0x22454b(0x20e)]||global[_0x30b315(0x132)][_0x166908(0x10f)]||global[_0x30b315(0x132)]['gm'])&&sticker2,sticker1][_0x30b315(0x144)](_0x561c61=>_0x561c61)){try{_0x388aaa=await _0x4d4eff(_0x198a1d,_0x1deffc,..._0x616fc8);if(_0x388aaa[_0x30b315(0x14f)](_0x30b315(0x14e)))continue;if(_0x388aaa[_0x30b315(0x14f)](_0x30b315(0x116)))try{return await addExif(_0x388aaa,..._0x616fc8);}catch(_0x484540){return console[_0x30b315(0x12a)](_0x484540),_0x388aaa;}throw _0x388aaa[_0x30b315(0x10e)]();}catch(_0x50ffb6){_0xdcc11=_0x50ffb6;continue;}}return console[_0x22454b(0x22e)](_0xdcc11),_0xdcc11;}const support={'ffmpeg':!![],'ffprobe':!![],'ffmpegWebp':!![],'convert':!![],'magick':![],'gm':![],'find':![]};export{sticker,sticker1,sticker2,sticker3,sticker4,sticker6,addExif,support};
